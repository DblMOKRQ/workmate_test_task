Простое HTTP API для управления длительными I/O bound задачами. Сервис позволяет создавать задачи, проверять их статус и удалять.

## Особенности

- Хранение задач в памяти (без внешних зависимостей)
    
- Поддержка graceful shutdown
    
- Логирование всех запросов
    
- Конфигурация через YAML-файл

## Требования

- Go 1.20+
    
- Установленные зависимости (см. go.mod)
    

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/DblMOKRQ/workmate_test_task.git
cd workmate_test_task
```
2. Установите зависимости:
```bash
go mod download
```
3. Запустите сервер:
```bash
go run cmd/main.go
```
Сервер запустится на `localhost:8080` (по умолчанию).

## Конфигурация

Настройки сервера можно изменить в файле `config/config.yaml`:
```yaml
http:
  host: "localhost"  # Хост для запуска сервера
  port: 8080         # Порт для запуска сервера
```

Путь к конфигурационному файлу можно изменить через переменную окружения:
```bash
export CONFIG_PATH=/path/to/config.yaml
go run cmd/main.go
```

## API Endpoints

### Создать задачу
```text
POST /create_task
```
**Response:**
```json
{
  "task_id": "550e8400-e29b-41d4-a716-446655440000"
}
```

### Получить статус задачи
```text
GET /tasks/{id}
```
**Response:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "processing",
  "created_at": "2023-01-01T12:00:00Z",
  "started_at": "2023-01-01T12:00:05Z",
  "duration_seconds": 120.5,
  "result": "..." // если завершена,
  "error": "..."  // если была ошибка
}
```

### Удалить задачу

```text
DELETE /tasks/{id}
```
**Response:**

- 204 No Content (успех)
    
- 404 Not Found (если задача не существует)

## Логирование

Сервис логирует все входящие запросы в формате:
```text
INFO	request	{"method": "GET", "path": "/tasks/123", "proto": "HTTP/1.1", "remote_addr": "127.0.0.1:12345"}
```
## Остановка сервера

Сервер поддерживает graceful shutdown при получении SIGINT или SIGTERM:

1. Прекращает принимать новые соединения
    
2. Ожидает завершения текущих запросов (до 30 секунд)
    
3. Корректно завершает работу
